# Tasks: Deployment на VDS с Docker

## 1. Оптимизация Docker конфигурации
- [x] 1.1 Добавить .dockerignore для исключения ненужных файлов
- [x] 1.2 Оптимизировать Dockerfile (multi-stage build уже есть)
- [x] 1.3 Добавить healthcheck для бота в Dockerfile
- [x] 1.4 Настроить логирование в docker-compose

## 2. Production конфигурация
- [x] 2.1 Создать docker-compose.prod.yml для production
- [x] 2.2 Настроить restart policies
- [x] 2.3 Добавить resource limits (memory, CPU)
- [x] 2.4 Настроить сеть между контейнерами
- [x] 2.5 Убрать expose портов PostgreSQL наружу

## 3. Скрипты управления
- [x] 3.1 Создать deploy.sh для деплоя на VDS
- [x] 3.2 Создать backup.sh для бэкапа базы данных
- [x] 3.3 Создать restore.sh для восстановления из бэкапа
- [x] 3.4 Создать logs.sh для просмотра логов
- [x] 3.5 Добавить права на выполнение скриптов

## 4. Systemd интеграция
- [x] 4.1 Создать systemd service файл
- [x] 4.2 Добавить инструкции по установке service
- [x] 4.3 Настроить автозапуск при перезагрузке

## 5. Логирование и мониторинг
- [x] 5.1 Настроить Docker logging driver
- [x] 5.2 Добавить ротацию логов
- [x] 5.3 Настроить вывод логов в файлы

## 6. Безопасность
- [x] 6.1 Создать .env.production.example
- [x] 6.2 Добавить инструкции по генерации паролей
- [x] 6.3 Настроить изоляцию сети Docker
- [x] 6.4 Добавить non-root пользователя в контейнер

## 7. Документация
- [x] 7.1 Создать docs/DEPLOYMENT.md с полной инструкцией
- [x] 7.2 Добавить требования к VDS (RAM, CPU, disk)
- [x] 7.3 Документировать процесс первичного деплоя
- [x] 7.4 Документировать процесс обновления
- [x] 7.5 Добавить troubleshooting секцию
- [x] 7.6 Обновить README.md с ссылкой на деплой

## 8. Тестирование
- [ ] 8.1 Протестировать деплой на чистом VDS
- [ ] 8.2 Протестировать backup и restore
- [ ] 8.3 Протестировать автозапуск после перезагрузки
- [ ] 8.4 Протестировать обновление версии
- [ ] 8.5 Проверить логи и мониторинг
